{% extends "ecom-template/base.html" %}
{% load static %}
{% block title %}Store | Django Shop{% endblock %}

{% block content %}
<section class="section-pagetop bg">
<div class="container">
    <h2 class="title-page">Our Store</h2>
</div>
</section>

<section class="section-content padding-y">
<div class="container">
<div class="row">

    <!-- Sidebar -->
    <aside class="col-md-3">
        <div class="card">
            <article class="filter-group">
                <header class="card-header">
                    <h6 class="title">Categories</h6>
                </header>
                <div class="card-body">
                    <ul class="list-menu">
                        <li class="{% if not selected_category %}active{% endif %}">
                            <a href="{% url 'store' %}">All</a>
                        </li>
                        {% for category in categories %}
                        <li class="{% if selected_category == category.slug %}active{% endif %}">
                            <a href="?category={{ category.slug }}">{{ category.category_name }}</a>
                        </li>
                        {% endfor %}
                    </ul>
                </div>
            </article>
        </div>
    </aside>

    <!-- Main Products -->
    <main class="col-md-9">
        <header class="border-bottom mb-4 pb-3">
            <div class="form-inline">
                <span class="mr-md-auto">{{ products|length }} Items found</span>
            </div>
        </header>

        <div class="row">
            {% for product in products %}
            <div class="col-md-4">
                <figure class="card card-product-grid">
                    <div class="img-wrap"> 
                        <img src="{{ product.images.url }}" alt="{{ product.product_name }}">
                    </div>
                    <figcaption class="info-wrap">
                        <div class="fix-height">
                            <a href="{% url 'product_detail' product.slug %}" class="title">{{ product.product_name }}</a>
                            <div class="price-wrap mt-2">
                                <span class="price">${{ product.price }}</span>
                            </div>
                        </div>
                        <a href="#" class="btn btn-block btn-primary">Add to cart</a>
                    </figcaption>
                </figure>
            </div>
            {% empty %}
            <p>No products found in this category.</p>
            {% endfor %}
        </div>

        <!-- Pagination Placeholder -->
        <nav class="mt-4" aria-label="Page navigation sample">
            <ul class="pagination">
                <li class="page-item disabled"><a class="page-link" href="#">Previous</a></li>
                <li class="page-item active"><a class="page-link" href="#">1</a></li>
                <li class="page-item"><a class="page-link" href="#">2</a></li>
                <li class="page-item"><a class="page-link" href="#">3</a></li>
                <li class="page-item"><a class="page-link" href="#">Next</a></li>
            </ul>
        </nav>

    </main>
</div>
</div>
</section>
{% endblock %}